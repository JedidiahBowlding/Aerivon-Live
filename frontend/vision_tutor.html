<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Aerivon Live ‚Äì Vision Tutor</title>
    <link rel="icon" href="./assets/favicon.ico" sizes="any" />
    <link rel="icon" type="image/png" href="./assets/favicon-96x96.png" sizes="96x96" />
    <link rel="apple-touch-icon" href="./assets/apple-touch-icon.png" />
    <link rel="manifest" href="./assets/site.webmanifest" />
    <style>
      * { box-sizing: border-box; margin: 0; padding: 0; }
      body { font-family: 'Georgia', serif; background: #0f0c1a; color: #e8dfc8; min-height: 100vh; padding: 2rem 1.5rem; }
      .header { display: flex; align-items: center; gap: 12px; margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 1px solid rgba(255,255,255,0.08); }
      .logo { width: 40px; height: 40px; border-radius: 10px; box-shadow: 0 4px 16px rgba(201,168,76,0.2); }
      h1 { font-size: 1.8rem; letter-spacing: 0.08em; background: linear-gradient(135deg, #c9a84c, #e8dfc8, #c9a84c); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin: 0; }
      h3 { color: #c9a84c; margin: 1.5rem 0 0.75rem; letter-spacing: 0.05em; font-size: 1.2rem; }
      .row { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; margin-bottom: 1rem; }
      input { padding: 0.65rem 0.9rem; background: rgba(255,255,255,0.06); border: 1px solid rgba(201,168,76,0.3); border-radius: 8px; color: #e8dfc8; font-family: Georgia, serif; outline: none; transition: border-color 0.2s; }
      input:focus { border-color: rgba(201,168,76,0.7); }
      button { padding: 0.65rem 1.2rem; background: linear-gradient(135deg, #c9a84c, #a8843a); color: #0f0c1a; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; letter-spacing: 0.04em; transition: all 0.2s; }
      button:hover:not(:disabled) { transform: translateY(-1px); box-shadow: 0 4px 16px rgba(201,168,76,0.4); }
      button:disabled { opacity: 0.4; cursor: not-allowed; }
      #status { font-weight: 600; color: #c9a84c; }
      #transcript, #log { white-space: pre-wrap; border: 1px solid rgba(201,168,76,0.2); background: rgba(0,0,0,0.2); padding: 1rem; border-radius: 8px; color: #e8dfc8; font-family: 'Courier New', monospace; font-size: 0.85rem; }
      #transcript { min-height: 120px; }
      #log { min-height: 90px; }
      .muted { color: rgba(232,223,200,0.5); font-size: 0.9rem; }
      #agentState { display: inline-block; font-weight: bold; }
      .state-idle { color: #7fda89; }
      .state-speaking { color: #64a2ff; }
      .state-interrupted { color: #ffa64d; }
      .pulse-once { animation: pulse 0.4s ease-out; }
      @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.08); } 100% { transform: scale(1); } }
      .spacer { height: 1rem; }
      code { background: rgba(201,168,76,0.15); color: #c9a84c; padding: 2px 8px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 0.85em; }
      a { color: #c9a84c; text-decoration: none; border-bottom: 1px solid rgba(201,168,76,0.3); transition: all 0.2s; }
      a:hover { border-bottom-color: #c9a84c; }
      img { border: 1px solid rgba(201,168,76,0.2); border-radius: 8px; }

      /* Responsive Design */
      @media (max-width: 768px) {
        body { padding: 1rem; }
        h1 { font-size: 1.5rem; }
        h3 { font-size: 1rem; }
        .header { flex-wrap: wrap; gap: 8px; }
        .row { gap: 8px; }
        input, textarea { padding: 0.55rem 0.75rem; font-size: 0.9rem; }
        button { padding: 0.55rem 1rem; font-size: 0.85rem; }
        #output, #log { font-size: 0.8rem; padding: 0.75rem; }
        img { max-width: 100%; }
      }

      @media (max-width: 480px) {
        body { padding: 0.75rem; }
        h1 { font-size: 1.3rem; }
        .logo { width: 32px; height: 32px; }
        button { padding: 0.6rem 0.9rem; font-size: 0.8rem; width: 100%; margin-bottom: 0.5rem; }
        .row { flex-direction: column; align-items: stretch; }
        input, textarea { width: 100%; }
        .muted, code { font-size: 0.8rem; }
      }
    </style>
  </head>
  <body>
    <div class="header">
      <img class="logo" src="./assets/favicon.png" alt="Aerivon" />
      <h1 style="margin: 0">Vision Tutor</h1>
      <span class="muted"><a href="./index.html">Home</a></span>
    </div>

    <p class="muted" style="margin-top: 6px">
      Upload a homework photo/screenshot and ask a question. You can interrupt by talking over the model (mic) or by sending another turn.
    </p>

    <div class="row">
      <button id="startBtn">üé§ Start</button>
      <button id="stopBtn" disabled>‚èπ Stop</button>
      <button id="uploadImgBtn">üñºÔ∏è Upload Image</button>
      <input id="visionPrompt" type="text" placeholder="e.g., Explain the discriminant first" style="min-width: 420px" value="Explain what you see and solve it step-by-step. If it‚Äôs math, explain the discriminant first." />
      <span id="status" class="muted">disconnected</span>
      <span id="stateBadge" class="muted">idle</span>
      <span class="muted">State: <strong id="agentState">IDLE</strong></span>
    </div>

    <input id="imageFile" type="file" accept="image/*" style="display:none" />

    <div class="spacer"></div>

    <div class="muted">
      Connects to <code id="wsUrl"></code>
    </div>

    <div class="spacer"></div>

    <h3>Transcript</h3>
    <div id="transcript"></div>

    <div class="spacer"></div>

    <h3>Uploaded Image</h3>
    <img id="uploadPreview" alt="Uploaded image preview" style="max-width: 100%; border: 1px solid #ddd; border-radius: 8px;" />

    <div class="spacer"></div>

    <h3>Log</h3>
    <div id="log"></div>

    <script type="module" src="./main.js"></script>
  </body>
</html>
